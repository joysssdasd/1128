# ==========================================
# 🚀 生产环境配置 - EdgeOne部署专用
# ==========================================

# 数据库配置 (Sealos PostgreSQL - 生产环境)
DATABASE_URL="postgresql://postgres:vw9v2kvc@dbconn.sealoshzh.site:44744/trading_platform?directConnection=true"

# ==========================================
# 🔐 JWT安全配置
# ==========================================
# 重要：生产环境请使用强密码，至少32位随机字符
JWT_SECRET="trading-platform-production-jwt-secret-key-2024-change-this-to-random-string"
JWT_EXPIRES_IN="7d"  # 生产环境建议缩短到7天

# ==========================================
# 🌐 服务器配置
# ==========================================
PORT="3000"  # EdgeOne通常使用3000端口
NODE_ENV="production"

# ==========================================
# 🛡️ 安全配置
# ==========================================
# 密码加密强度（生产环境建议12-14）
BCRYPT_ROUNDS="14"
SESSION_SECRET="production-session-secret-change-this-to-random-string-2024"

# ==========================================
# 🚦 API限流配置
# ==========================================
# 15分钟窗口期，最多100个请求
RATE_LIMIT_WINDOW_MS="900000"
RATE_LIMIT_MAX_REQUESTS="100"

# ==========================================
# 📁 文件上传配置
# ==========================================
# 最大上传10MB
UPLOAD_MAX_SIZE="10485760"
UPLOAD_ALLOWED_TYPES="image/jpeg,image/png,image/gif,image/webp"

# ==========================================
# 📊 日志配置
# ==========================================
# 生产环境使用info级别
LOG_LEVEL="info"
LOG_FILE="logs/app.log"

# ==========================================
# 💾 Redis缓存配置 (可选)
# ==========================================
# 如果EdgeOne支持Redis，可以配置
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""  # 如果有密码请配置
REDIS_DB="0"

# ==========================================
# 📧 邮件服务配置 (可选)
# ==========================================
# 如果使用邮件通知功能，请配置
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER=""     # 您的邮箱
SMTP_PASS=""     # 邮箱密码或应用专用密码

# ==========================================
# 📱 短信服务配置 (可选)
# ==========================================
# 如果使用短信验证功能，请配置
SMS_URL=""       # 短信服务URL
SMS_USER_ID=""   # 用户ID
SMS_APP_KEY=""   # 应用密钥
SMS_SIGN_NAME="交易撮合平台"

# ==========================================
# 🤖 AI服务配置 (可选)
# ==========================================
# 如果使用AI功能，请配置
OPENAI_API_KEY=""
OPENAI_BASE_URL="https://api.openai.com/v1"

# ==========================================
# 👨‍💼 管理员配置
# ==========================================
# 管理员默认密码（首次登录后请修改）
ADMIN_DEFAULT_PASSWORD="admin123456"

# ==========================================
# 🏢 应用信息配置
# ==========================================
APP_NAME="交易信息撮合平台"
APP_VERSION="1.0.0"
APP_DESCRIPTION="积分驱动的C2C交易信息撮合平台 - 支持演唱会门票、数码产品、潮玩、纪念币等"

# ==========================================
# 🌍 CORS配置
# ==========================================
# 生产环境请配置您的域名
CORS_ORIGIN="https://your-domain.com"  # 替换为您的域名

# ==========================================
# 🔍 监控配置 (可选)
# ==========================================
# 如果使用监控服务，请配置
SENTRY_DSN=""              # Sentry错误监控
GOOGLE_ANALYTICS_ID=""     # Google Analytics

# ==========================================
# 💰 支付配置 (可选)
# ==========================================
# 微信支付
WECHAT_PAY_APP_ID=""
WECHAT_PAY_MCH_ID=""
WECHAT_PAY_KEY=""

# 支付宝
ALIPAY_APP_ID=""
ALIPAY_PRIVATE_KEY=""
ALIPAY_PUBLIC_KEY=""

# ==========================================
# 📋 部署注意事项
# ==========================================
# 1. 确保所有敏感信息都已正确配置
# 2. JWT_SECRET和SESSION_SECRET必须是强密码
# 3. 数据库连接必须稳定可靠
# 4. 建议启用HTTPS（EdgeOne会自动处理）
# 5. 定期备份数据库
# 6. 监控日志文件大小
# 7. 配置适当的错误监控

# ==========================================
# 🚀 EdgeOne部署检查清单
# ==========================================
# □ 数据库连接正常
# □ 所有环境变量已配置
# □ 构建命令: npm install && npm run build
# □ 启动命令: npm start
# □ 端口: 3000
# □ 域名已配置
# □ HTTPS已启用
# □ 错误监控已配置

# ==========================================
# 💡 安全提醒
# ==========================================
# 1. 永远不要提交.env文件到Git仓库
# 2. 定期更换JWT_SECRET和SESSION_SECRET
# 3. 使用强密码和密钥
# 4. 启用数据库备份
# 5. 配置适当的访问控制
# 6. 监控异常访问和错误